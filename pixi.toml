[workspace]
authors = ["Krisztian Szucs <szucs.krisztian@gmail.com>"]
channels = ["conda-forge", "https://conda.modular.com/max-nightly"]
name = "marrow"
platforms = ["osx-arm64", "linux-64"]
version = "0.1.0"

[tasks]
build_python = {cmd="mojo build -I . python/lib.mojo --emit shared-lib -o python/marrow.so"}
test_mojo = {cmd = "bash run_tests.sh" }
test_python = {cmd = "pytest -s -v python/tests", depends-on=["build_python"]}
test = {depends-on = ["test_mojo", "test_python"]}
fmt_mojo = {cmd = "mojo format marrow"}
fmt_python = {cmd = "ruff format python" }
fmt = {depends-on = ["fmt_mojo", "fmt_python"]}
package = "mojo package marrow -o package/marrow.mojopkg"

[dependencies]
mojo = ">=0.26.2.0.dev2026012822,<0.27"
python = ">=3.14.2,<3.15"
pytest = ">=9.0.2,<10"
ruff = ">=0.14.14,<0.15"

[pypi-dependencies]
pyarrow = ">=23.0.0, <24"
